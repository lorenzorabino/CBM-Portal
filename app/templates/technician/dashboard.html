<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Technician Dashboard</title>
  <link rel="stylesheet" href="/static/style.css">
  <script src="/static/main.js" defer></script>
  <style>
    table { width:100%; border-collapse: collapse; }
    th, td { border:1px solid #ddd; padding:6px 8px; }
    thead tr { background:#f7f7f7; }
  </style>
</head>
<body>
  <header class="page-header">
    <h1>{{ page_title or 'Technician Dashboard' }}</h1>
  </header>
  <main class="container">
    <nav style="margin-bottom:10px; display:flex; gap:8px; flex-wrap:wrap;">
      <a class="btn" href="/technician/vibration">Vibration</a>
      <a class="btn" href="/technician/oil">Oil</a>
      <a class="btn" href="/technician/thermal">Thermal</a>
      <a class="btn" href="/technician/ultrasonic">Ultrasonic</a>
      <a class="btn" href="/technician/motor_dynamic">Motor Dynamic</a>
      <a class="btn" href="/technician/leak_detection">Leak Detection</a>
      <a class="btn" href="/technician/balancing">Balancing</a>
      <a class="btn" href="/technician/other">Other</a>
    </nav>
    {% if tasks|length == 0 %}
      <p>No tasks found.</p>
    {% else %}
  <table>
        <thead>
          <tr>
    <th>ID</th>
    <th>Week #</th>
    <th>Department</th>
    <th>Equipment</th>
    <th>PM Date</th>
    <th>Status</th>
    <th>Alarm Level</th>
    <th>Remarks</th>
    
          </tr>
        </thead>
        <tbody>
          {% for t in tasks %}
          <tr>
    <td>{{ t.id or '' }}</td>
            <td>{{ t.week_number or '' }}</td>
            <td>{{ t.department or '' }}</td>
            <td>{{ t.equipment or '' }}</td>
    <td>{{ t.pm_date or '-' }}</td>
          <td>
            {% set s = (t.status or '') %}
            <span class="badge">{{ s }}</span>
          </td>
          <td>
            {% set a = (t.alarm_level or '-') %}
            {% set acls = 'alarm-normal' %}
            {% if a == 'Critical' %}{% set acls = 'alarm-critical' %}{% elif a == 'Warning' %}{% set acls = 'alarm-warning' %}{% endif %}
            <span class="badge {{ acls }}">{{ a }}</span>
          </td>
  <td>{{ t.notes or '-' }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endif %}
  </main>
</body>
</html>
